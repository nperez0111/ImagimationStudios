$(document).ready(function(){$("#date").text((new Date).getFullYear())}),function(a,b,c){"use strict";var d,e;a.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},d=a.uaMatch(b.navigator.userAgent),e={},d.browser&&(e[d.browser]=!0,e.version=d.version),e.chrome?e.webkit=!0:e.webkit&&(e.safari=!0),a.browser=e}(jQuery,window),function(a){var b={vertical:!1,rtl:!1,start:1,offset:1,size:null,scroll:3,visible:null,animation:"normal",easing:"swing",auto:0,wrap:null,initCallback:null,setupCallback:null,reloadCallback:null,itemLoadCallback:null,itemFirstInCallback:null,itemFirstOutCallback:null,itemLastInCallback:null,itemLastOutCallback:null,itemVisibleInCallback:null,itemVisibleOutCallback:null,animationStepCallback:null,buttonNextHTML:"<div></div>",buttonPrevHTML:"<div></div>",buttonNextEvent:"click",buttonPrevEvent:"click",buttonNextCallback:null,buttonPrevCallback:null,itemFallbackDimension:null},c=!1;a(window).bind("load.jcarousel",function(){c=!0}),a.jcarousel=function(d,e){this.options=a.extend({},b,e||{}),this.autoStopped=this.locked=!1,this.buttonPrevState=this.buttonNextState=this.buttonPrev=this.buttonNext=this.list=this.clip=this.container=null,e&&void 0!==e.rtl||(this.options.rtl="rtl"==(a(d).attr("dir")||a("html").attr("dir")||"").toLowerCase()),this.wh=this.options.vertical?"height":"width",this.lt=this.options.vertical?"top":this.options.rtl?"right":"left";for(var f="",g=d.className.split(" "),h=0;h<g.length;h++)if(-1!=g[h].indexOf("jcarousel-skin")){a(d).removeClass(g[h]),f=g[h];break}"UL"==d.nodeName.toUpperCase()||"OL"==d.nodeName.toUpperCase()?(this.list=a(d),this.clip=this.list.parents(".jcarousel-clip"),this.container=this.list.parents(".jcarousel-container")):(this.container=a(d),this.list=this.container.find("ul,ol").eq(0),this.clip=this.container.find(".jcarousel-clip")),0===this.clip.size()&&(this.clip=this.list.wrap("<div></div>").parent()),0===this.container.size()&&(this.container=this.clip.wrap("<div></div>").parent()),""!==f&&-1==this.container.parent()[0].className.indexOf("jcarousel-skin")&&this.container.wrap('<div class=" '+f+'"></div>'),this.buttonPrev=a(".jcarousel-prev",this.container),0===this.buttonPrev.size()&&null!==this.options.buttonPrevHTML&&(this.buttonPrev=a(this.options.buttonPrevHTML).appendTo(this.container)),this.buttonPrev.addClass(this.className("jcarousel-prev")),this.buttonNext=a(".jcarousel-next",this.container),0===this.buttonNext.size()&&null!==this.options.buttonNextHTML&&(this.buttonNext=a(this.options.buttonNextHTML).appendTo(this.container)),this.buttonNext.addClass(this.className("jcarousel-next")),this.clip.addClass(this.className("jcarousel-clip")).css({position:"relative"}),this.list.addClass(this.className("jcarousel-list")).css({overflow:"hidden",position:"relative",top:0,margin:0,padding:0}).css(this.options.rtl?"right":"left",0),this.container.addClass(this.className("jcarousel-container")).css({position:"relative"}),!this.options.vertical&&this.options.rtl&&this.container.addClass("jcarousel-direction-rtl").attr("dir","rtl");var i=null!==this.options.visible?Math.ceil(this.clipping()/this.options.visible):null,f=this.list.children("li"),j=this;if(f.size()>0){var k=0,l=this.options.offset;f.each(function(){j.format(this,l++),k+=j.dimension(this,i)}),this.list.css(this.wh,k+100+"px"),e&&void 0!==e.size||(this.options.size=f.size())}this.container.css("display","block"),this.buttonNext.css("display","block"),this.buttonPrev.css("display","block"),this.funcNext=function(){j.next()},this.funcPrev=function(){j.prev()},this.funcResize=function(){j.resizeTimer&&clearTimeout(j.resizeTimer),j.resizeTimer=setTimeout(function(){j.reload()},100)},null!==this.options.initCallback&&this.options.initCallback(this,"init"),!c&&a.browser.safari?(this.buttons(!1,!1),a(window).bind("load.jcarousel",function(){j.setup()})):this.setup()};var d=a.jcarousel;d.fn=d.prototype={jcarousel:"0.2.8"},d.fn.extend=d.extend=a.extend,d.fn.extend({setup:function(){if(this.prevLast=this.prevFirst=this.last=this.first=null,this.animating=!1,this.tail=this.resizeTimer=this.timer=null,this.inTail=!1,!this.locked){this.list.css(this.lt,this.pos(this.options.offset)+"px");var b=this.pos(this.options.start,!0);this.prevFirst=this.prevLast=null,this.animate(b,!1),a(window).unbind("resize.jcarousel",this.funcResize).bind("resize.jcarousel",this.funcResize),null!==this.options.setupCallback&&this.options.setupCallback(this)}},reset:function(){this.list.empty(),this.list.css(this.lt,"0px"),this.list.css(this.wh,"10px"),null!==this.options.initCallback&&this.options.initCallback(this,"reset"),this.setup()},reload:function(){if(null!==this.tail&&this.inTail&&this.list.css(this.lt,d.intval(this.list.css(this.lt))+this.tail),this.tail=null,this.inTail=!1,null!==this.options.reloadCallback&&this.options.reloadCallback(this),null!==this.options.visible){var a=this,b=Math.ceil(this.clipping()/this.options.visible),c=0,e=0;this.list.children("li").each(function(d){c+=a.dimension(this,b),d+1<a.first&&(e=c)}),this.list.css(this.wh,c+"px"),this.list.css(this.lt,-e+"px")}this.scroll(this.first,!1)},lock:function(){this.locked=!0,this.buttons()},unlock:function(){this.locked=!1,this.buttons()},size:function(a){return void 0!==a&&(this.options.size=a,this.locked||this.buttons()),this.options.size},has:function(a,b){void 0!==b&&b||(b=a),null!==this.options.size&&b>this.options.size&&(b=this.options.size);for(var c=a;b>=c;c++){var d=this.get(c);if(!d.length||d.hasClass("jcarousel-item-placeholder"))return!1}return!0},get:function(b){return a(">.jcarousel-item-"+b,this.list)},add:function(b,c){var e=this.get(b),f=0,g=a(c);if(0===e.length){for(var h,i=d.intval(b),e=this.create(b);;)if(h=this.get(--i),0>=i||h.length){0>=i?this.list.prepend(e):h.after(e);break}}else f=this.dimension(e);return"LI"==g.get(0).nodeName.toUpperCase()?(e.replaceWith(g),e=g):e.empty().append(c),this.format(e.removeClass(this.className("jcarousel-item-placeholder")),b),g=null!==this.options.visible?Math.ceil(this.clipping()/this.options.visible):null,f=this.dimension(e,g)-f,b>0&&b<this.first&&this.list.css(this.lt,d.intval(this.list.css(this.lt))-f+"px"),this.list.css(this.wh,d.intval(this.list.css(this.wh))+f+"px"),e},remove:function(a){var b=this.get(a);if(b.length&&!(a>=this.first&&a<=this.last)){var c=this.dimension(b);a<this.first&&this.list.css(this.lt,d.intval(this.list.css(this.lt))+c+"px"),b.remove(),this.list.css(this.wh,d.intval(this.list.css(this.wh))-c+"px")}},next:function(){null===this.tail||this.inTail?this.scroll("both"!=this.options.wrap&&"last"!=this.options.wrap||null===this.options.size||this.last!=this.options.size?this.first+this.options.scroll:1):this.scrollTail(!1)},prev:function(){null!==this.tail&&this.inTail?this.scrollTail(!0):this.scroll("both"!=this.options.wrap&&"first"!=this.options.wrap||null===this.options.size||1!=this.first?this.first-this.options.scroll:this.options.size)},scrollTail:function(a){if(!this.locked&&!this.animating&&this.tail){this.pauseAuto();var b=d.intval(this.list.css(this.lt)),b=a?b+this.tail:b-this.tail;this.inTail=!a,this.prevFirst=this.first,this.prevLast=this.last,this.animate(b)}},scroll:function(a,b){!this.locked&&!this.animating&&(this.pauseAuto(),this.animate(this.pos(a),b))},pos:function(a,b){var c=d.intval(this.list.css(this.lt));if(this.locked||this.animating)return c;"circular"!=this.options.wrap&&(a=1>a?1:this.options.size&&a>this.options.size?this.options.size:a);for(var e=this.first>a,f="circular"!=this.options.wrap&&this.first<=1?1:this.first,g=this.get(e?f:this.last),h=e?f:f-1,i=null,j=0,k=!1,l=0;e?--h>=a:++h<a;)i=this.get(h),k=!i.length,0===i.length&&(i=this.create(h).addClass(this.className("jcarousel-item-placeholder")),g[e?"before":"after"](i),null!==this.first&&"circular"==this.options.wrap&&null!==this.options.size&&(0>=h||h>this.options.size))&&(g=this.get(this.index(h)),g.length&&(i=this.add(h,g.clone(!0)))),g=i,l=this.dimension(i),k&&(j+=l),null!==this.first&&("circular"==this.options.wrap||h>=1&&(null===this.options.size||h<=this.options.size))&&(c=e?c+l:c-l);for(var f=this.clipping(),m=[],n=0,o=0,g=this.get(a-1),h=a;++n;){if(i=this.get(h),k=!i.length,0===i.length&&(i=this.create(h).addClass(this.className("jcarousel-item-placeholder")),0===g.length?this.list.prepend(i):g[e?"before":"after"](i),null!==this.first&&"circular"==this.options.wrap&&null!==this.options.size&&(0>=h||h>this.options.size)&&(g=this.get(this.index(h)),g.length&&(i=this.add(h,g.clone(!0))))),g=i,l=this.dimension(i),0===l)throw Error("jCarousel: No width/height set for items. This will cause an infinite loop. Aborting...");if("circular"!=this.options.wrap&&null!==this.options.size&&h>this.options.size?m.push(i):k&&(j+=l),o+=l,o>=f)break;h++}for(i=0;i<m.length;i++)m[i].remove();if(j>0&&(this.list.css(this.wh,this.dimension(this.list)+j+"px"),e&&(c-=j,this.list.css(this.lt,d.intval(this.list.css(this.lt))-j+"px"))),j=a+n-1,"circular"!=this.options.wrap&&this.options.size&&j>this.options.size&&(j=this.options.size),h>j)for(n=0,h=j,o=0;++n&&(i=this.get(h--),i.length)&&(o+=this.dimension(i),!(o>=f)););for(h=j-n+1,"circular"!=this.options.wrap&&1>h&&(h=1),this.inTail&&e&&(c+=this.tail,this.inTail=!1),this.tail=null,"circular"!=this.options.wrap&&j==this.options.size&&j-n+1>=1&&(e=d.intval(this.get(j).css(this.options.vertical?"marginBottom":"marginRight")),o-e>f)&&(this.tail=o-f-e),b&&a===this.options.size&&this.tail&&(c-=this.tail,this.inTail=!0);a-->h;)c+=this.dimension(this.get(a));return this.prevFirst=this.first,this.prevLast=this.last,this.first=h,this.last=j,c},animate:function(b,c){if(!this.locked&&!this.animating){this.animating=!0;var d=this,e=function(){if(d.animating=!1,0===b&&d.list.css(d.lt,0),!d.autoStopped&&("circular"==d.options.wrap||"both"==d.options.wrap||"last"==d.options.wrap||null===d.options.size||d.last<d.options.size||d.last==d.options.size&&null!==d.tail&&!d.inTail)&&d.startAuto(),d.buttons(),d.notify("onAfterAnimation"),"circular"==d.options.wrap&&null!==d.options.size)for(var a=d.prevFirst;a<=d.prevLast;a++)null!==a&&!(a>=d.first&&a<=d.last)&&(1>a||a>d.options.size)&&d.remove(a)};if(this.notify("onBeforeAnimation"),this.options.animation&&c!==!1){var f=this.options.vertical?{top:b}:this.options.rtl?{right:b}:{left:b},e={duration:this.options.animation,easing:this.options.easing,complete:e};a.isFunction(this.options.animationStepCallback)&&(e.step=this.options.animationStepCallback),this.list.animate(f,e)}else this.list.css(this.lt,b+"px"),e()}},startAuto:function(a){if(void 0!==a&&(this.options.auto=a),0===this.options.auto)return this.stopAuto();if(null===this.timer){this.autoStopped=!1;var b=this;this.timer=window.setTimeout(function(){b.next()},1e3*this.options.auto)}},stopAuto:function(){this.pauseAuto(),this.autoStopped=!0},pauseAuto:function(){null!==this.timer&&(window.clearTimeout(this.timer),this.timer=null)},buttons:function(a,b){null!=a||(a=!this.locked&&0!==this.options.size&&(this.options.wrap&&"first"!=this.options.wrap||null===this.options.size||this.last<this.options.size),this.locked||this.options.wrap&&"first"!=this.options.wrap||null===this.options.size||!(this.last>=this.options.size))||(a=null!==this.tail&&!this.inTail),null!=b||(b=!this.locked&&0!==this.options.size&&(this.options.wrap&&"last"!=this.options.wrap||this.first>1),this.locked||this.options.wrap&&"last"!=this.options.wrap||null===this.options.size||1!=this.first)||(b=null!==this.tail&&this.inTail);var c=this;this.buttonNext.size()>0?(this.buttonNext.unbind(this.options.buttonNextEvent+".jcarousel",this.funcNext),a&&this.buttonNext.bind(this.options.buttonNextEvent+".jcarousel",this.funcNext),this.buttonNext[a?"removeClass":"addClass"](this.className("jcarousel-next-disabled")).attr("disabled",a?!1:!0),null!==this.options.buttonNextCallback&&this.buttonNext.data("jcarouselstate")!=a&&this.buttonNext.each(function(){c.options.buttonNextCallback(c,this,a)}).data("jcarouselstate",a)):null!==this.options.buttonNextCallback&&this.buttonNextState!=a&&this.options.buttonNextCallback(c,null,a),this.buttonPrev.size()>0?(this.buttonPrev.unbind(this.options.buttonPrevEvent+".jcarousel",this.funcPrev),b&&this.buttonPrev.bind(this.options.buttonPrevEvent+".jcarousel",this.funcPrev),this.buttonPrev[b?"removeClass":"addClass"](this.className("jcarousel-prev-disabled")).attr("disabled",b?!1:!0),null!==this.options.buttonPrevCallback&&this.buttonPrev.data("jcarouselstate")!=b&&this.buttonPrev.each(function(){c.options.buttonPrevCallback(c,this,b)}).data("jcarouselstate",b)):null!==this.options.buttonPrevCallback&&this.buttonPrevState!=b&&this.options.buttonPrevCallback(c,null,b),this.buttonNextState=a,this.buttonPrevState=b},notify:function(a){var b=null===this.prevFirst?"init":this.prevFirst<this.first?"next":"prev";this.callback("itemLoadCallback",a,b),this.prevFirst!==this.first&&(this.callback("itemFirstInCallback",a,b,this.first),this.callback("itemFirstOutCallback",a,b,this.prevFirst)),this.prevLast!==this.last&&(this.callback("itemLastInCallback",a,b,this.last),this.callback("itemLastOutCallback",a,b,this.prevLast)),this.callback("itemVisibleInCallback",a,b,this.first,this.last,this.prevFirst,this.prevLast),this.callback("itemVisibleOutCallback",a,b,this.prevFirst,this.prevLast,this.first,this.last)},callback:function(b,c,d,e,f,g,h){if(null!=this.options[b]&&("object"==typeof this.options[b]||"onAfterAnimation"==c)){var i="object"==typeof this.options[b]?this.options[b][c]:this.options[b];if(a.isFunction(i)){var j=this;if(void 0===e)i(j,d,c);else if(void 0===f)this.get(e).each(function(){i(j,this,e,d,c)});else for(var b=function(a){j.get(a).each(function(){i(j,this,a,d,c)})},k=e;f>=k;k++)null!==k&&!(k>=g&&h>=k)&&b(k)}}},create:function(a){return this.format("<li></li>",a)},format:function(b,c){for(var b=a(b),d=b.get(0).className.split(" "),e=0;e<d.length;e++)-1!=d[e].indexOf("jcarousel-")&&b.removeClass(d[e]);return b.addClass(this.className("jcarousel-item")).addClass(this.className("jcarousel-item-"+c)).css({"float":this.options.rtl?"right":"left","list-style":"none"}).attr("jcarouselindex",c),b},className:function(a){return a+" "+a+(this.options.vertical?"-vertical":"-horizontal")},dimension:function(b,c){var e=a(b);if(null==c)return this.options.vertical?e.outerHeight(!0)||d.intval(this.options.itemFallbackDimension):e.outerWidth(!0)||d.intval(this.options.itemFallbackDimension);var f=this.options.vertical?c-d.intval(e.css("marginTop"))-d.intval(e.css("marginBottom")):c-d.intval(e.css("marginLeft"))-d.intval(e.css("marginRight"));return a(e).css(this.wh,f+"px"),this.dimension(e)},clipping:function(){return this.options.vertical?this.clip[0].offsetHeight-d.intval(this.clip.css("borderTopWidth"))-d.intval(this.clip.css("borderBottomWidth")):this.clip[0].offsetWidth-d.intval(this.clip.css("borderLeftWidth"))-d.intval(this.clip.css("borderRightWidth"))},index:function(a,b){return null==b&&(b=this.options.size),Math.round(((a-1)/b-Math.floor((a-1)/b))*b)+1}}),d.extend({defaults:function(c){return a.extend(b,c||{})},intval:function(a){return a=parseInt(a,10),isNaN(a)?0:a},windowLoaded:function(){c=!0}}),a.fn.jcarousel=function(b){if("string"==typeof b){var c=a(this).data("jcarousel"),e=Array.prototype.slice.call(arguments,1);return c[b].apply(c,e)}return this.each(function(){var c=a(this).data("jcarousel");c?(b&&a.extend(c.options,b),c.reload()):a(this).data("jcarousel",new d(this,b))})}}(jQuery),function(a){"";"use strict";var b={autoPlay:!0,speed:5e3,text:{play:"",stop:"",previous:"Previous",next:"Next",loading:"Loading"},transition:[1],showCaption:!0,IESafe:!1,showTooltips:!1,carousel:!1,swipe:!0,carouselVertical:!1,animationFinished:null,buildFinished:null,bindsFinished:null,startOn:0,thumbOpacity:.4,hoverPause:!1,animationSpeed:600,fadeThumbsIn:!1,carouselOptions:{},thumbChangeEvent:"click.pikachoose",stopOnClick:!1,hideThumbnails:!1};a.fn.PikaChoose=function(b){return this.each(function(){a(this).data("pikachoose",new c(this,b))})},a.PikaChoose=function(c,d){if(this.options=a.extend({},b,d||{}),this.list=null,this.image=null,this.anchor=null,this.caption=null,this.imgNav=null,this.imgPlay=null,this.imgPrev=null,this.imgNext=null,this.textNext=null,this.textPrev=null,this.previous=null,this.next=null,this.aniWrap=null,this.aniDiv=null,this.aniImg=null,this.thumbs=null,this.transition=null,this.active=null,this.tooltip=null,this.animating=!1,this.stillOut=null,this.counter=null,this.timeOut=null,this.pikaStage=null,"undefined"!=typeof this.options.data&&(c=a("<ul></ul>").addClass("jcarousel-skin-pika").appendTo(c),a.each(this.options.data,function(){var b=null;"undefined"!=typeof this.link?(b=a("<li><a href='"+this.link+"'><img></a></li>").appendTo(c),"undefined"!=typeof this.title&&b.find("a").attr("title",this.title)):b=a("<li><img></li>").appendTo(c),"undefined"!=typeof this.caption&&b.append("<span>"+this.caption+"</span>"),"undefined"!=typeof this.thumbnail?(b.find("img").attr("ref",this.image),b.find("img").attr("src",this.thumbnail)):b.find("img").attr("src",this.image)})),c instanceof jQuery||"UL"==c.nodeName.toUpperCase()||"OL"==c.nodeName.toUpperCase()){this.list=a(c),this.build(),this.bindEvents();for(var e=0,f=0,g=0;25>g;g++){var h='<div col="'+e+'" row="'+f+'"></div>';this.aniDiv.append(h),e++,5==e&&(f++,e=0)}}};var c=a.PikaChoose;c.fn=c.prototype={version:"96"},a.fn.pikachoose=a.fn.PikaChoose,c.fn.extend=c.extend=a.extend,c.fn.extend({build:function(){this.step=0,this.options.pikaStage?(this.wrap=this.options.pikaStage,this.wrap.addClass("pika-stage")):this.wrap=a("<div class='pika-stage'></div>").insertBefore(this.list),this.image=a("<img>").appendTo(this.wrap),this.imgNav=a("<div class='pika-imgnav'></div>").insertAfter(this.image),this.imgPlay=a("<a></a>").appendTo(this.imgNav),this.counter=a("<span class='pika-counter'></span>").appendTo(this.imgNav),this.imgPlay.addClass(this.options.autoPlay?"pause":"play"),this.imgPrev=a("<a class='previous'></a>").insertAfter(this.imgPlay),this.imgNext=a("<a class='next'></a>").insertAfter(this.imgPrev),this.caption=a("<div class='caption'></div>").insertAfter(this.imgNav).hide(),this.tooltip=a("<div class='pika-tooltip'></div>").insertAfter(this.list).hide(),this.aniWrap=a("<div class='pika-aniwrap'></div>").insertAfter(this.caption),this.aniImg=a("<img>").appendTo(this.aniWrap).hide(),this.aniDiv=a("<div class='pika-ani'></div>").appendTo(this.aniWrap),this.textNav=a("<div class='pika-textnav'></div>").insertAfter(this.aniWrap),this.textPrev=a("<a class='previous'>"+this.options.text.previous+"</a>").appendTo(this.textNav),this.textNext=a("<a class='next'>"+this.options.text.next+"</a>").appendTo(this.textNav),this.list.addClass("pika-thumbs"),this.thumbs=this.list.find("img"),this.loader=a("<div class='pika-loader'></div>").appendTo(this.wrap).hide().html(this.options.text.loading),this.active=this.thumbs.eq(this.options.startOn),this.finishAnimating({index:this.options.startOn,source:this.active.attr("ref")||this.active.attr("src"),caption:this.active.parents("li:first").find("span:first").html(),clickThrough:this.active.parent().attr("href")||"",clickThroughTarget:this.active.parent().attr("target")||"",clickThroughTitle:this.active.parent().attr("title")||""}),this.aniDiv.css({position:"relative"});var b=this;if(this.updateThumbs(),this.options.fadeThumbsIn&&this.list.fadeIn(),this.options.hideThumbnails&&this.list.hide(),this.options.carousel&&a.fn.jcarousel){var c={vertical:this.options.carouselVertical,initCallback:function(a){jQuery(a.list).find("img").click(function(c,d){if("undefined"!=typeof d&&"auto"==d.how&&b.options.autoPlay===!1)return!1;var e=parseInt(jQuery(this).parents(".jcarousel-item").attr("jcarouselindex"),10),f=jQuery(this).parents("ul").find("li:last").attr("jcarouselindex")==e-1?!0:!1;f||(e=0>=e-2?0:e-2),e++,a.scroll(e)})}},d=a.extend({},c,this.options.carouselOptions||{});this.list.jcarousel(d)}this.options.swipe&&a.fn.touchwipe&&this.wrap.touchwipe({wipeLeft:function(){b.Next()},wipeRight:function(){b.Prev()}}),"function"==typeof this.options.buildFinished&&this.options.buildFinished(this)},createThumb:function(b){var c=b,d=this;if(this.thumbs=this.list.find("img"),"undefined"==typeof a.data(b[0],"source")){b.parents("li:first").wrapInner("<div class='clip' />"),c.hide(),a.data(b[0],"clickThrough",c.parent("a").attr("href")||""),a.data(b[0],"clickThroughTarget",c.parent("a").attr("target")||""),a.data(b[0],"clickThroughTitle",c.parent("a").attr("title")||""),c.parent("a").length>0&&c.unwrap(),a.data(b[0],"caption",c.next("span").html()||""),c.next("span").remove(),a.data(b[0],"source",c.attr("ref")||c.attr("src")),a.data(b[0],"imageTitle",c.attr("title")||""),a.data(b[0],"imageAlt",c.attr("alt")||""),a.data(b[0],"index",this.thumbs.index(b)),a.data(b[0],"order",c.closest("ul").find("li").index(c.parents("li")));var e=a.data(b[0]);a("<img />").on("load",{data:e},function(){"function"==typeof d.options.buildThumbStart&&d.options.buildThumbStart(d);var b=a(this),f=this.width,g=this.height;0===f&&(f=b.attr("width")),0===g&&(g=b.attr("height"));var h=parseInt(c.parents(".clip").css("height").slice(0,-2),10),i=parseInt(c.parents(".clip").css("width").slice(0,-2),10);0===i&&(i=c.parents("li:first").outerWidth()),0===h&&(h=c.parents("li:first").outerHeight());var j=i/f,k=h/g;k>j?(c.css({height:"100%"}),c.fadeTo(.001,0),c.css({left:-(c.outerWidth()-i)/2}),c.hide()):c.css({width:"100%"}),c.hover(function(b){clearTimeout(d.stillOut),a(this).stop(!0,!0).fadeTo(250,1),d.options.showTooltips&&d.tooltip.show().stop(!0,!0).html(e.caption).animate({top:a(this).parent().position().top,left:a(this).parent().position().left,opacity:1},"fast")},function(b){a(this).hasClass("active")||(a(this).stop(!0,!0).fadeTo(250,d.options.thumbOpacity),d.stillOut=setTimeout(d.hideTooltip,700))}),e.order==d.options.startOn?(c.fadeTo(250,1),c.addClass("active"),c.parents("li").eq(0).addClass("active")):c.fadeTo(250,d.options.thumbOpacity),"function"==typeof d.options.buildThumbFinish&&d.options.buildThumbFinish(d)}).attr("src",c.attr("src"))}},bindEvents:function(){this.thumbs.on(this.options.thumbChangeEvent,{self:this},this.imgClick),this.imgNext.on("click.pikachoose",{self:this},this.nextClick),this.textNext.on("click.pikachoose",{self:this},this.nextClick),this.imgPrev.on("click.pikachoose",{self:this},this.prevClick),this.textPrev.on("click.pikachoose",{self:this},this.prevClick),this.imgPlay.unbind("click.pikachoose").on("click.pikachoose",{self:this},this.playClick),this.wrap.unbind("mouseenter.pikachoose").on("mouseenter.pikachoose",{self:this},function(a){a.data.self.imgNav.stop(!0,!0).fadeTo("slow",1),a.data.self.options.hoverPause===!0&&clearTimeout(a.data.self.timeOut)}),this.wrap.unbind("mouseleave.pikachoose").on("mouseleave.pikachoose",{self:this},function(a){a.data.self.imgNav.stop(!0,!0).fadeTo("slow",0),a.data.self.options.autoPlay&&a.data.self.options.hoverPause&&(a.data.self.timeOut=setTimeout(function(a){return function(){a.nextClick()}}(a.data.self),a.data.self.options.speed))}),this.tooltip.unbind("mouseenter.pikachoose").on("mouseenter.pikachoose",{self:this},function(a){clearTimeout(a.data.self.stillOut)}),this.tooltip.unbind("mouseleave.pikachoose").on("mouseleave.pikachoose",{self:this},function(a){a.data.self.stillOut=setTimeout(a.data.self.hideTooltip,700)}),"function"==typeof this.options.bindsFinished&&this.options.bindsFinished(this)},hideTooltip:function(b){a(".pika-tooltip").animate({opacity:.01})},imgClick:function(b,c){var d=b.data.self,e=a.data(this);if(!d.animating){if("undefined"==typeof c||"auto"!=c.how)d.options.autoPlay&&d.options.stopOnClick?d.imgPlay.trigger("click"):clearTimeout(d.timeOut);else if(!d.options.autoPlay)return!1;a(this).attr("src")!==a.data(this).source&&d.loader.fadeIn("fast"),d.caption.fadeOut("slow"),d.animating=!0,d.active.fadeTo(300,d.options.thumbOpacity).removeClass("active"),d.active.parents(".active").eq(0).removeClass("active"),d.active=a(this),d.active.addClass("active").fadeTo(200,1),d.active.parents("li").eq(0).addClass("active"),a("<img />").on("load",{self:d,data:e},function(){d.loader.fadeOut("fast"),d.aniDiv.css({height:d.image.height(),width:d.image.width()}).show(),d.aniDiv.children("div").css({width:"20%",height:"20%","float":"left"});var b=0;-1==d.options.transition[0]?b=Math.floor(7*Math.random())+1:(b=d.options.transition[d.step],d.step++,d.step>=d.options.transition.length&&(d.step=0)),d.options.IESafe&&a.browser.msie&&(b=1),d.doAnimation(b,e)}).attr("src",a.data(this).source)}},doAnimation:function(b,c){this.aniWrap.css({position:"absolute",top:this.wrap.css("padding-top"),left:this.wrap.css("padding-left"),width:this.wrap.width()});var d=this;d.image.stop(!0,!1),d.caption.stop().fadeOut();var e=d.aniDiv.children("div").eq(0).width(),f=d.aniDiv.children("div").eq(0).height(),g=new Image;switch(a(g).attr("src",c.source),g.height!=d.image.height()||g.width!=d.image.width(),d.aniDiv.css({height:d.image.height(),width:d.image.width()}),d.aniDiv.children().each(function(){var b=a(this),d=Math.floor(b.parent().width()/5)*b.attr("col"),e=Math.floor(b.parent().height()/5)*b.attr("row");b.css({background:"url("+c.source+") -"+d+"px -"+e+"px","background-size":b.parent().width()+"px "+b.parent().height()+"px",width:"0px",height:"0px",position:"absolute",top:e+"px",left:d+"px","float":"none"})}),d.aniDiv.hide(),d.aniImg.hide(),b){case 0:d.image.stop(!0,!0).fadeOut(d.options.animationSpeed,function(){d.image.attr("src",c.source).fadeIn(d.options.animationSpeed,function(){d.finishAnimating(c)})});break;case 1:d.aniDiv.hide(),d.aniImg.height(d.image.height()).hide().attr("src",c.source),d.wrap.css({height:d.image.height()}),a.when(d.image.fadeOut(d.options.animationSpeed),d.aniImg.eq(0).fadeIn(d.options.animationSpeed)).done(function(){d.finishAnimating(c)});break;case 2:d.aniDiv.show().children().hide().each(function(b){var g=30*b;a(this).css({opacity:.1}).show().delay(g).animate({opacity:1,width:e,height:f},200,"linear",function(){24==d.aniDiv.find("div").index(this)&&d.finishAnimating(c)})});break;case 3:d.aniDiv.show().children("div:lt(5)").hide().each(function(b){var f=100*a(this).attr("col");a(this).css({opacity:.1,width:e}).show().delay(f).animate({opacity:1,height:d.image.height()},d.options.animationSpeed,"linear",function(){4==d.aniDiv.find(" div").index(this)&&d.finishAnimating(c)})});break;case 4:d.aniDiv.show().children().hide().each(function(b){if(!(b>4)){var g=30*a(this).attr("col"),h=d.gapper(a(this),f,e),i=.7*d.options.animationSpeed;a(this).css({opacity:.1,height:"100%"}).show().delay(g).animate({opacity:1,width:h.width},i,"linear",function(){4==d.aniDiv.find(" div").index(this)&&d.finishAnimating(c)})}});break;case 5:d.aniDiv.show().children().show().each(function(b){var g=b*Math.floor(5*Math.random())*7,h=d.gapper(a(this),f,e);24==a(".animation div").index(this)&&(g=700),a(this).css({height:h.height,width:h.width,opacity:.01}).delay(g).animate({opacity:1},d.options.animationSpeed,function(){24==d.aniDiv.find(" div").index(this)&&d.finishAnimating(c)})});break;case 6:d.aniDiv.height(d.image.height()).hide().css({background:"url("+c.source+") top left no-repeat"}),d.aniDiv.children("div").hide(),d.aniDiv.css({width:0}).show().animate({width:d.image.width()},d.options.animationSpeed,function(){d.finishAnimating(c),d.aniDiv.css({background:"transparent"})});break;case 7:d.wrap.css({overflow:"hidden"}),d.aniImg.height(d.image.height()).hide().attr("src",c.source),d.aniDiv.hide(),d.image.css({position:"relative"}).animate({left:"-"+d.wrap.outerWidth()+"px"}),d.aniImg.show(),d.aniWrap.css({left:d.wrap.outerWidth()}).show().animate({left:"0px"},d.options.animationSpeed,function(){d.finishAnimating(c)})}},finishAnimating:function(b){this.animating=!1,this.image.attr("src",b.source),this.image.attr("alt",b.imageAlt),this.image.attr("title",b.imageTitle),this.image.css({left:"0"}),this.image.show();var c=this;a("<img />").on("load",function(){c.aniImg.fadeOut("fast"),c.aniDiv.fadeOut("fast")}).attr("src",b.source);var d=b.index+1,e=this.thumbs.length;this.counter.html(d+"/"+e),""!==b.clickThrough?(null===this.anchor&&(this.anchor=this.image.wrap("<a>").parent()),this.anchor.attr("href",b.clickThrough),this.anchor.attr("title",b.clickThroughTitle),this.anchor.attr("target",b.clickThroughTarget)):(this.image.parent("a").length>0&&this.image.unwrap(),this.anchor=null),this.options.showCaption&&""!==b.caption&&null!==b.caption&&this.caption.html(b.caption).fadeTo("slow",1),this.options.autoPlay&&e>1&&(this.timeOut=setTimeout(function(a){return function(){a.nextClick()}}(this),this.options.speed,this.timeOut)),"function"==typeof this.options.animationFinished&&this.options.animationFinished(this)},gapper:function(a,b,c){var d;return 4==a.attr("row")&&(d=this.aniDiv.height()-5*b+b,b=d),4==a.attr("col")&&(d=this.aniDiv.width()-5*c+c,c=d),{height:b,width:c}},nextClick:function(a){var b="natural",c=null;try{c=a.data.self,"function"==typeof a.data.self.options.next&&a.data.self.options.next(this)}catch(d){c=this,b="auto"}var e=c.active.parents("li:first").next().find("img");return 0===e.length&&(e=c.list.find("img").eq(0)),e.trigger("click",{how:b}),e},prevClick:function(a){"function"==typeof a.data.self.options.previous&&a.data.self.options.previous(this);var b=a.data.self,c=b.active.parents("li:first").prev().find("img");return 0===c.length&&(c=b.list.find("img:last")),c.trigger("click"),c},playClick:function(a){var b=a.data.self;return b.options.autoPlay=!b.options.autoPlay,b.imgPlay.toggleClass("play").toggleClass("pause"),b.options.autoPlay?b.nextClick():clearTimeout(b.timeOut),b.options.autoPlay?"playing":"paused"},Next:function(){var a={data:{self:this}};return this.nextClick(a)},Prev:function(){var a={data:{self:this}};return this.prevClick(a)},GoTo:function(a){var b=this.list.find("img").eq(a);if(b.length>0)return b.trigger("click"),b;throw"Image not found. Images are 0 indexed."},Play:function(){if(this.options.autoPlay)return"playing";var a={data:{self:this}};return this.playClick(a)},Pause:function(){if(!this.options.autoPlay)return"paused";var a={data:{self:this}};return this.playClick(a)},updateThumbs:function(){var b=this;this.thumbs=this.list.find("img"),this.thumbs.each(function(){b.createThumb(a(this),b)})}})}(jQuery),function(a){a.fn.touchwipe=function(b){var c={min_move_x:20,min_move_y:20,wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){},preventDefaultEvents:!0};return b&&a.extend(c,b),this.each(function(){function a(){this.removeEventListener("touchmove",b),e=null,g=!1}function b(b){if(c.preventDefaultEvents&&b.preventDefault(),g){var d=b.touches[0].pageX,h=b.touches[0].pageY,i=e-d,j=f-h;Math.abs(i)>=c.min_move_x?(a(),i>0?c.wipeLeft():c.wipeRight()):Math.abs(j)>=c.min_move_y&&(a(),j>0?c.wipeDown():c.wipeUp())}}function d(a){1==a.touches.length&&(e=a.touches[0].pageX,f=a.touches[0].pageY,g=!0,this.addEventListener("touchmove",b,!1))}var e,f,g=!1;"ontouchstart"in document.documentElement&&this.addEventListener("touchstart",d,!1)}),this}}(jQuery);